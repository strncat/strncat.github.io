<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="nemo&apos;s notebook" />
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">nemo&#39;s notebook</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/math/">Math</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
  
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Binary Tree Rotations</h1>
    <!--
    <p class="post-meta">
      <time class="dt-published" datetime="2019-05-02T12:01:36-07:00" itemprop="datePublished">May 2, 2019
      </time></p>
     -->
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Rotating a tree is an essential step in the process of balancing binary search trees (Red-Black trees and AVL trees). What makes rotations a special and important tool is that they maintain the binary search property.
<br />
<br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>Left Rotations</b></h4>
<p>Given a subtree with root \(x\) that has a right subtree \(y\). A left rotation makes \(y\) the new root of the subtree and \(x\) its left subtree. \(y\)’s left subtree \(b\) will be \(x\)’s right subtree. The subtrees $a$ and $c$ remain the same.</p>
<svg width="800" height="260" version="1.1" xmlns="http://www.w3.org/2000/svg">
	<ellipse stroke="black" stroke-width="1" fill="gray" fill-opacity="0.25" cx="571.5" cy="55.5" rx="30" ry="30" />
	<text x="566.5" y="61.5" font-family="Times New Roman" font-size="20">x</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="524.5" cy="137.5" rx="30" ry="30" />
	<text x="520.5" y="143.5" font-family="Times New Roman" font-size="20">a</text>
	<ellipse stroke="black" stroke-width="1" fill="yellow" fill-opacity="0.25" cx="627.5" cy="137.5" rx="30" ry="30" />
	<text x="622.5" y="143.5" font-family="Times New Roman" font-size="20">y</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="681.5" cy="222.5" rx="30" ry="30" />
	<text x="677.5" y="228.5" font-family="Times New Roman" font-size="20">c</text>
	<ellipse stroke="black" stroke-width="1" fill="blue" fill-opacity="0.25" cx="588.5" cy="222.5" rx="30" ry="30" />
	<text x="583.5" y="228.5" font-family="Times New Roman" font-size="20">b</text>
	<ellipse stroke="black" stroke-width="1" fill="yellow" fill-opacity="0.25" cx="187.5" cy="55.5" rx="30" ry="30" />
	<text x="182.5" y="61.5" font-family="Times New Roman" font-size="20">y</text>
	<ellipse stroke="black" stroke-width="1" fill="gray" fill-opacity="0.25" cx="142.5" cy="137.5" rx="30" ry="30" />
	<text x="137.5" y="143.5" font-family="Times New Roman" font-size="20">x</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="230.5" cy="137.5" rx="30" ry="30" />
	<text x="226.5" y="143.5" font-family="Times New Roman" font-size="20">c</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="94.5" cy="222.5" rx="30" ry="30" />
	<text x="90.5" y="228.5" font-family="Times New Roman" font-size="20">a</text>
	<ellipse stroke="black" stroke-width="1" fill="blue" fill-opacity="0.25" cx="181.5" cy="222.5" rx="30" ry="30" />
	<text x="176.5" y="228.5" font-family="Times New Roman" font-size="20">b</text>
	<text x="317.5" y="132.5" font-family="Times New Roman" font-size="20">&lt;&lt; left rotation</text>
	<polygon stroke="black" stroke-width="1" points="588.419,80.274 610.581,112.726" />
	<polygon fill="black" stroke-width="1" points="610.581,112.726 610.198,103.3 601.94,108.939" />
	<polygon stroke="black" stroke-width="1" points="556.582,81.528 539.418,111.472" />
	<polygon fill="black" stroke-width="1" points="539.418,111.472 547.735,107.018 539.059,102.045" />
	<polygon stroke="black" stroke-width="1" points="643.587,162.822 665.413,197.178" />
	<polygon fill="black" stroke-width="1" points="665.413,197.178 665.344,187.744 656.903,193.106" />
	<polygon stroke="black" stroke-width="1" points="614.989,164.767 601.011,195.233" />
	<polygon fill="black" stroke-width="1" points="601.011,195.233 608.891,190.047 599.802,185.877" />
	<polygon stroke="black" stroke-width="1" points="201.432,82.069 216.568,110.931" />
	<polygon fill="black" stroke-width="1" points="216.568,110.931 217.281,101.524 208.424,106.168" />
	<polygon stroke="black" stroke-width="1" points="155.011,164.767 168.989,195.233" />
	<polygon fill="black" stroke-width="1" points="168.989,195.233 170.198,185.877 161.109,190.047" />
	<polygon stroke="black" stroke-width="1" points="127.748,163.623 109.252,196.377" />
	<polygon fill="black" stroke-width="1" points="109.252,196.377 117.539,191.87 108.832,186.953" />
	<polygon stroke="black" stroke-width="1" points="173.067,81.8 156.933,111.2" />
	<polygon fill="black" stroke-width="1" points="156.933,111.2 165.165,106.592 156.398,101.781" />
</svg>
<p><br />
<br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>Correctness Proof</b></h4>
<p>We want to prove the following:</p>

<table>
  <tbody>
    <tr>
      <td>a left rotation maintains the binary search property</td>
    </tr>
  </tbody>
</table>

<p><i>Proof:</i><br />
Let \(T\) be a binary search tree and let the right subtree above be in \(T\). Let \(T'\) be the tree resulted after \(T\) has been left rotated at \(x\). We want to prove \(T'\) is a binary search tree. To do so, we need to prove that each node is maintaining the BST property. First, since \(y\) is a right child of \(x\) then we know that \(x.key \leq y.key\). After the rotation is done, \(x\) is a left child of \(y\) maintaining the BST property. Similarly, in T, \(b\) is a left child of \(y\), so this means that \(b.key \leq y.key\) and since the \(b\) in the right subtree of \(x\), we also know that \(b.key \geq x.key\). After the rotation is done, we see that in \(T'\), \(b\) is a right child of \(x\) maintaining the BST property since \(b.key \geq x.key\) and \(b.key \leq y.key\). Finally we see that \(a.key \leq x.key\) and \(x.key \leq y.key\) in \(T\) and so so \(a\) is still maintaining the BST property in \(T'\). Similarly, \(c.key \geq y.key\) and \(y.key \geq x.key\) in \(T\) and so \(c\) is still maintaining the BST property in \(T'\).
<br />
<br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>Implementation</b></h4>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="nf">left_rotate</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="n">Node</span> <span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Node</span> <span class="o">*</span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span> <span class="c1">// we are assuming x has a right child</span>

    <span class="c1">// as in the example above, y's left child b becomes x's new right child</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// if there is a left child, fix up the parent pointer</span>
        <span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// b's parent is x now</span>
    <span class="p">}</span>

    <span class="c1">// since y is the new root then we fix up y's parent pointer</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
	
	<span class="c1">// we should now fix the parent link to point to y unless x was the root itself, then y is the new root</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">==</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// this means x is the root (no parent pointer)</span>
        <span class="n">T</span><span class="o">-&gt;</span><span class="n">root</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// x is a left child, make y the left child of x's parent</span>
        <span class="n">x</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// x is a right child, make y the right child of x's parent</span>
        <span class="n">x</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// finally, x is now the left child of y and y is its parent</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p><br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>Right Rotations</b></h4>
<p>Similarly, a rotation rotation takes a node \(y\) with its left child \(x\) and rotate them so that \(x\) is the parent of \(y\) and \(y\) is now a right child of \(x\).</p>

<svg width="800" height="260" version="1.1" xmlns="http://www.w3.org/2000/svg">
	<ellipse stroke="black" stroke-width="1" fill="gray" fill-opacity="0.25" cx="571.5" cy="55.5" rx="30" ry="30" />
	<text x="566.5" y="61.5" font-family="Times New Roman" font-size="20">x</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="524.5" cy="137.5" rx="30" ry="30" />
	<text x="520.5" y="143.5" font-family="Times New Roman" font-size="20">a</text>
	<ellipse stroke="black" stroke-width="1" fill="yellow" fill-opacity="0.25" cx="627.5" cy="137.5" rx="30" ry="30" />
	<text x="622.5" y="143.5" font-family="Times New Roman" font-size="20">y</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="681.5" cy="222.5" rx="30" ry="30" />
	<text x="677.5" y="228.5" font-family="Times New Roman" font-size="20">c</text>
	<ellipse stroke="black" stroke-width="1" fill="blue" fill-opacity="0.25" cx="588.5" cy="222.5" rx="30" ry="30" />
	<text x="583.5" y="228.5" font-family="Times New Roman" font-size="20">b</text>
	<ellipse stroke="black" stroke-width="1" fill="yellow" fill-opacity="0.25" cx="187.5" cy="55.5" rx="30" ry="30" />
	<text x="182.5" y="61.5" font-family="Times New Roman" font-size="20">y</text>
	<ellipse stroke="black" stroke-width="1" fill="gray" fill-opacity="0.25" cx="142.5" cy="137.5" rx="30" ry="30" />
	<text x="137.5" y="143.5" font-family="Times New Roman" font-size="20">x</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="230.5" cy="137.5" rx="30" ry="30" />
	<text x="226.5" y="143.5" font-family="Times New Roman" font-size="20">c</text>
	<ellipse stroke="black" stroke-width="1" fill="none" cx="94.5" cy="222.5" rx="30" ry="30" />
	<text x="90.5" y="228.5" font-family="Times New Roman" font-size="20">a</text>
	<ellipse stroke="black" stroke-width="1" fill="blue" fill-opacity="0.25" cx="181.5" cy="222.5" rx="30" ry="30" />
	<text x="176.5" y="228.5" font-family="Times New Roman" font-size="20">b</text>
	<text x="317.5" y="132.5" font-family="Times New Roman" font-size="20">right rotation &gt;&gt;</text>
	<polygon stroke="black" stroke-width="1" points="588.419,80.274 610.581,112.726" />
	<polygon fill="black" stroke-width="1" points="610.581,112.726 610.198,103.3 601.94,108.939" />
	<polygon stroke="black" stroke-width="1" points="556.582,81.528 539.418,111.472" />
	<polygon fill="black" stroke-width="1" points="539.418,111.472 547.735,107.018 539.059,102.045" />
	<polygon stroke="black" stroke-width="1" points="643.587,162.822 665.413,197.178" />
	<polygon fill="black" stroke-width="1" points="665.413,197.178 665.344,187.744 656.903,193.106" />
	<polygon stroke="black" stroke-width="1" points="614.989,164.767 601.011,195.233" />
	<polygon fill="black" stroke-width="1" points="601.011,195.233 608.891,190.047 599.802,185.877" />
	<polygon stroke="black" stroke-width="1" points="201.432,82.069 216.568,110.931" />
	<polygon fill="black" stroke-width="1" points="216.568,110.931 217.281,101.524 208.424,106.168" />
	<polygon stroke="black" stroke-width="1" points="155.011,164.767 168.989,195.233" />
	<polygon fill="black" stroke-width="1" points="168.989,195.233 170.198,185.877 161.109,190.047" />
	<polygon stroke="black" stroke-width="1" points="127.748,163.623 109.252,196.377" />
	<polygon fill="black" stroke-width="1" points="109.252,196.377 117.539,191.87 108.832,186.953" />
	<polygon stroke="black" stroke-width="1" points="173.067,81.8 156.933,111.2" />
	<polygon fill="black" stroke-width="1" points="156.933,111.2 165.165,106.592 156.398,101.781" />
</svg>
<p><br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>Implementation</b></h4>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="nf">right_rotate</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="n">Node</span> <span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Node</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span> <span class="c1">// we are assuming y has a left child x</span>

    <span class="c1">// as in the example above,x's right child becomes y's left child</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// fix up the parent pointer</span>
        <span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// since x is the new root then we fix up x's parent pointer</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">=</span> <span class="n">y</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
	
	<span class="c1">// we should now fix the parent link to point to x unless y was the root itself, then y is the new root</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">y</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">==</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// this means y is the root (no parent pointer)</span>
        <span class="n">T</span><span class="o">-&gt;</span><span class="n">root</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">==</span> <span class="n">y</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// y is a left child, make x the left child of y's parent</span>
        <span class="n">y</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// y is a right child, make x the right child of y's parent</span>
        <span class="n">y</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// finally, y is now the right child of x and x is its parent</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p><br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>Running Time</b></h4>
<p>Since we’re performing a constant number of link changes then the runtime is \(O(1)\).
<br />
<br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>Implementation</b></h4>
<p>https://github.com/strncat/algorithms-and-data-structures/blob/master/trees/red-black-tree.cpp
<br />
<br />
<!----------------------------------------------------------------------------------------></p>
<h4><b>References</b></h4>
<p>CLRS
<br />
<br /></p>

  </div><div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = /jekyll/update/2019/05/02/binary-tree-rotation.html;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier =  /jekyll/update/2019/05/02/binary-tree-rotation; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://strncat-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="u-url" href="/jekyll/update/2019/05/02/binary-tree-rotation.html" hidden></a>
</article>
		 
      </div>
    </main>

    <!--<footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">nemo&#39;s notebook</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">nemo&#39;s notebook</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>personal study notes</p>
      </div>
    </div>

  </div>

</footer>
-->

	
  </body>

</html>
